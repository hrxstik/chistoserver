generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("MONGODB_URI")
}

model User {
  id           String     @id @default(auto()) @map("_id") @db.ObjectId
  name         String
  email        String     @unique
  password     String

  gender Gender

  roomsAmount Int
  homeArea HomeArea
  rooms RoomType[]

  roommates Json
  pets Json

  streak Int
  checklistsCompleted Int
  points Int
  league League

  checklist Checklist

  verified     DateTime?
  provider     String?
  providerId   String?

  verificationCode VerificationCode?
  achievements Achievement[]

  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
}

model VerificationCode {
  id         String      @id @default(auto()) @map("_id") @db.ObjectId
  user       User        @relation(fields: [userId], references: [id])
  userId String @unique @db.ObjectId
  code       String
  createdAt  DateTime    @default(now())

  @@unique([userId, code])
}
 
model Achievement {
  id       String @id @default(auto()) @map("_id") @db.ObjectId
  name     String
  levels   Int[]
  type     AchievementType
  values   Int[]

  users User[]
}

model Checklist {
  id        String      @id @default(auto()) @map("_id") @db.ObjectId
  user      User        @relation(fields: [userId], references: [id])
  userId    String @unique @db.ObjectId
  tasks     Task[]
}

model Task {
  id       String @id @default(auto()) @map("_id") @db.ObjectId
  description     String
  
  type     TaskType
  reward Int

  checklists Checklist[]
}

enum Profession {
  STUDENT
  OFFICE_WORKER
  REMOTE_WORKER
  HYBRID_WORKER
  STREET_WORKER
}

enum AchievementType {
  STREAK
  POINTS
  CHECKLISTS_COMPLETED
  BRONZE_LEAGUE_REACHED
  SILVER_LEAGUE_REACHED
  GOLD_LEAGUE_REACHED
  PLATINUM_LEAGUE_REACHED
  DIAMOND_LEAGUE_REACHED
}

enum HomeArea {
  TINY
  SMALL
  MEDIUM
  LARGE
}

enum Gender {
  MALE
  FEMALE
}

enum League {
  BRONZE_LEAGUE
  SILVER_LEAGUE
  GOLD_LEAGUE
  PLATINUM_LEAGUE
  DIAMOND_LEAGUE
}

enum TaskType {
  HORIZONTAL_SURFACES_WET_CLEANING
  VERTICAL_SURFACES_WET_CLEANING
  HORIZONTAL_SURFACES_VACUUMING
  LAUNDRY
  DISHWASHING
}

enum RoomType {
  KITCHEN
  BATHROOM
  LIVING_ROOM
  BEDROOM
  OFFICE
}

